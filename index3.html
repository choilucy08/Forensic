<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë””ì§€í„¸ í¬ë Œì‹ ì‹œë®¬ë ˆì´í„°</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .draggable {
      cursor: grab;
      user-select: none;
      transition: background-color 0.3s;
    }
    .draggable:hover {
      background-color: #bfdbfe; /* Tailwind sky-300 */
    }
    .dragging {
      opacity: 0.5;
      cursor: grabbing;
    }
    /* ìŠ¤í¬ë¡¤ë°” ê°œì„  */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-thumb {
      background: #3b82f6; /* Tailwind blue-500 */
      border-radius: 4px;
    }
    ::-webkit-scrollbar-track {
      background: #e0e7ff; /* Tailwind indigo-100 */
    }
  </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-white to-green-50 min-h-screen p-4">
  <div class="max-w-5xl mx-auto bg-white rounded-2xl shadow-xl p-8 space-y-8">
    <h1 class="text-4xl font-extrabold text-center text-indigo-700 mb-10 select-none">
      ğŸ•µï¸â€â™‚ï¸ ë””ì§€í„¸ í¬ë Œì‹ ì‹œë®¬ë ˆì´í„°
    </h1>

    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="flex flex-wrap justify-center gap-6 mb-10 font-semibold text-lg">
      <button id="navRestore" class="nav-btn px-5 py-2 rounded-full border-2 border-indigo-600 bg-indigo-600 text-white shadow-lg hover:bg-indigo-700 transition">íŒŒì¼ ë³µì›</button>
      <button id="navLogs" class="nav-btn px-5 py-2 rounded-full border-2 border-gray-300 text-gray-600 hover:border-indigo-600 hover:text-indigo-600 transition">ë¡œê·¸ ë¶„ì„</button>
      <button id="navScenario" class="nav-btn px-5 py-2 rounded-full border-2 border-gray-300 text-gray-600 hover:border-indigo-600 hover:text-indigo-600 transition">í¬ë Œì‹ ê²Œì„</button>
      <button id="navTimeline" class="nav-btn px-5 py-2 rounded-full border-2 border-gray-300 text-gray-600 hover:border-indigo-600 hover:text-indigo-600 transition">íƒ€ì„ë¼ì¸ ë³µì›</button>
    </nav>

    <main id="mainContent" class="space-y-10">
      <!-- íŒŒì¼ ë³µì› ì‹œë®¬ë ˆì´í„° -->
      <section id="sectionRestore" class="space-y-4">
        <h2 class="text-3xl font-bold text-indigo-700 border-b-4 border-indigo-400 pb-2 select-none">íŒŒì¼ ë³µì› ì‹œë®¬ë ˆì´í„°</h2>
        <p class="text-gray-700">ì‚­ì œëœ íŒŒì¼ ëª©ë¡ì—ì„œ ë³µì› ê°€ëŠ¥í•œ íŒŒì¼ì„ ì„ íƒí•˜ê³  ë³µì› ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.</p>
        <ul id="deletedFileList" class="border rounded-lg p-5 max-h-52 overflow-y-auto bg-indigo-50 shadow-inner"></ul>
        <button id="btnRestore" class="w-full md:w-auto bg-indigo-600 text-white font-semibold px-6 py-3 rounded-lg hover:bg-indigo-700 shadow-md transition">ë³µì› ì‹œë„</button>
        <p id="restoreResult" class="mt-3 font-semibold text-center text-lg"></p>
      </section>

      <!-- ë¡œê·¸ ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜ -->
      <section id="sectionLogs" class="hidden space-y-4">
        <h2 class="text-3xl font-bold text-indigo-700 border-b-4 border-indigo-400 pb-2 select-none">ë¡œê·¸ ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜</h2>
        <p class="text-gray-700">ì„œë²„ ë¡œê·¸ì—ì„œ ê³µê²©ì IPë¥¼ ì°¾ì•„ë³´ì„¸ìš”.</p>
        <textarea id="logArea" class="w-full h-56 border rounded-lg p-4 font-mono text-sm bg-indigo-50 resize-none shadow-inner" readonly></textarea>
        <div class="flex flex-col sm:flex-row sm:items-center sm:space-x-3 space-y-3 sm:space-y-0">
          <input type="text" id="ipGuess" placeholder="ê³µê²©ì IPë¥¼ ì…ë ¥í•˜ì„¸ìš”" class="border rounded-lg p-3 w-full sm:w-72 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-400" />
          <button id="btnCheckIP" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 shadow-md transition w-full sm:w-auto font-semibold">í™•ì¸</button>
        </div>
        <p id="logResult" class="mt-3 font-semibold text-center text-lg"></p>
      </section>

      <!-- í¬ë Œì‹ ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ ê²Œì„ -->
      <section id="sectionScenario" class="hidden space-y-4">
        <h2 class="text-3xl font-bold text-indigo-700 border-b-4 border-indigo-400 pb-2 select-none">í¬ë Œì‹ ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ ê²Œì„</h2>
        <div id="scenarioText" class="border rounded-lg p-6 mb-4 bg-indigo-50 min-h-[140px] shadow-inner text-gray-800"></div>
        <input id="scenarioInput" type="text" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" class="border rounded-lg p-3 w-full text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-400" />
        <button id="btnScenarioNext" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 shadow-md transition w-full font-semibold">ì œì¶œ</button>
        <p id="scenarioResult" class="mt-3 font-semibold text-center text-lg"></p>
      </section>

      <!-- íƒ€ì„ë¼ì¸ ë³µì› ê¸°ëŠ¥ -->
      <section id="sectionTimeline" class="hidden space-y-4">
        <h2 class="text-3xl font-bold text-indigo-700 border-b-4 border-indigo-400 pb-2 select-none">íƒ€ì„ë¼ì¸ ë³µì› ê¸°ëŠ¥</h2>
        <p class="text-gray-700">ì•„ë˜ ì‚¬ê±´ë“¤ì„ ì‹œê°„ ìˆœì„œëŒ€ë¡œ ë“œë˜ê·¸í•˜ì—¬ ì •ë ¬ í›„ ì œì¶œí•˜ì„¸ìš”.</p>
        <ul id="timelineList" class="border rounded-lg p-6 bg-indigo-50 max-w-3xl mx-auto space-y-4 select-none shadow-inner"></ul>
        <button id="btnSubmitTimeline" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 shadow-md transition block mx-auto font-semibold">ì œì¶œ</button>
        <p id="timelineResult" class="mt-3 font-semibold text-center text-lg"></p>
      </section>
    </main>
  </div>

  <script>
    // ë„¤ë¹„ê²Œì´ì…˜ íƒ­ ê´€ë¦¬
    const sections = {
      'navRestore': 'sectionRestore',
      'navLogs': 'sectionLogs',
      'navScenario': 'sectionScenario',
      'navTimeline': 'sectionTimeline'
    };
    const navButtons = document.querySelectorAll('.nav-btn');
    const mainContent = document.getElementById('mainContent');

    navButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        // íƒ­ í™œì„±í™” ìŠ¤íƒ€ì¼ ì¡°ì •
        navButtons.forEach(b => {
          b.classList.remove('border-indigo-600', 'text-indigo-600', 'bg-indigo-600', 'text-white', 'shadow-lg');
          b.classList.add('border-gray-300', 'text-gray-600', 'bg-white', 'shadow-none');
        });
        btn.classList.remove('border-gray-300', 'text-gray-600', 'bg-white', 'shadow-none');
        btn.classList.add('border-indigo-600', 'text-indigo-600', 'bg-indigo-600', 'text-white', 'shadow-lg');

        // ì„¹ì…˜ í‘œì‹œ ì „í™˜
        for (const key in sections) {
          document.getElementById(sections[key]).classList.add('hidden');
        }
        document.getElementById(sections[btn.id]).classList.remove('hidden');
      });
    });

    // ----------------------------
    // 1. íŒŒì¼ ë³µì› ì‹œë®¬ë ˆì´í„°
    const deletedFiles = [
      { name: "report.docx", canRestore: true },
      { name: "photo.jpg", canRestore: false },
      { name: "presentation.pptx", canRestore: true },
      { name: "secret.txt", canRestore: true },
      { name: "archive.zip", canRestore: false }
    ];
    const deletedFileList = document.getElementById('deletedFileList');
    const restoreResult = document.getElementById('restoreResult');
    const btnRestore = document.getElementById('btnRestore');

    function renderDeletedFiles() {
      deletedFileList.innerHTML = "";
      deletedFiles.forEach((file, idx) => {
        const li = document.createElement('li');
        li.className = "flex items-center space-x-4 cursor-pointer p-3 rounded-lg hover:bg-indigo-200 transition";
        li.innerHTML = `
          <input type="checkbox" id="fileCheck${idx}" class="w-5 h-5 accent-indigo-600" />
          <label for="fileCheck${idx}" class="select-none text-indigo-900 font-medium">${file.name}</label>
        `;
        deletedFileList.appendChild(li);
      });
    }

    btnRestore.addEventListener('click', () => {
      const checkedFiles = [];
      deletedFileList.querySelectorAll('input[type=checkbox]').forEach((chk, idx) => {
        if (chk.checked) checkedFiles.push(deletedFiles[idx]);
      });
      if (checkedFiles.length === 0) {
        restoreResult.textContent = "âš ï¸ ë³µì›í•  íŒŒì¼ì„ í•˜ë‚˜ ì´ìƒ ì„ íƒí•˜ì„¸ìš”.";
        restoreResult.style.color = "#ca8a04"; // amber-600
        return;
      }
      let successFiles = checkedFiles.filter(f => f.canRestore).map(f => f.name);
      let failFiles = checkedFiles.filter(f => !f.canRestore).map(f => f.name);

      let msg = "";
      if (successFiles.length > 0) msg += `âœ… ë³µì› ì„±ê³µ: ${successFiles.join(', ')}\n`;
      if (failFiles.length > 0) msg += `âŒ ë³µì› ì‹¤íŒ¨: ${failFiles.join(', ')}`;
      restoreResult.textContent = msg.trim();
      restoreResult.style.color = failFiles.length > 0 ? "#dc2626" : "#16a34a"; // red-600 or green-600
    });

    renderDeletedFiles();

    // ----------------------------
    // 2. ë¡œê·¸ ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜
    const logArea = document.getElementById('logArea');
    const ipGuess = document.getElementById('ipGuess');
    const btnCheckIP = document.getElementById('btnCheckIP');
    const logResult = document.getElementById('logResult');

    const sampleLogs = `
2025-07-19 10:12:30 INFO User login success IP=192.168.1.10
2025-07-19 10:13:02 WARN Failed login attempt IP=10.0.0.5
2025-07-19 10:15:47 ERROR Unauthorized access IP=203.0.113.42
2025-07-19 10:16:05 INFO File uploaded IP=192.168.1.10
2025-07-19 10:20:11 WARN Failed login attempt IP=203.0.113.42
2025-07-19 10:25:30 INFO User logout IP=192.168.1.10
2025-07-19 10:30:00 ERROR Unauthorized access IP=203.0.113.42
`.trim();

    logArea.value = sampleLogs;
    const attackerIP = "203.0.113.42";

    btnCheckIP.addEventListener('click', () => {
      const guess = ipGuess.value.trim();
      if (guess === "") {
        logResult.textContent = "âš ï¸ IPë¥¼ ì…ë ¥í•˜ì„¸ìš”.";
        logResult.style.color = "#ca8a04";
        return;
      }
      if (guess === attackerIP) {
        logResult.textContent = "âœ… ì •ë‹µ! ê³µê²©ì IPê°€ ë§ìŠµë‹ˆë‹¤.";
        logResult.style.color = "#16a34a";
      } else {
        logResult.textContent = "âŒ í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.";
        logResult.style.color = "#dc2626";
      }
    });

    // ----------------------------
    // 3. í¬ë Œì‹ ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ ê²Œì„
    const scenarioText = document.getElementById('scenarioText');
    const scenarioInput = document.getElementById('scenarioInput');
    const btnScenarioNext = document.getElementById('btnScenarioNext');
    const scenarioResult = document.getElementById('scenarioResult');

    const scenarioSteps = [
      {
        text: "íšŒì‚¬ ë‚´ë¶€ ê¸°ë°€ì´ ìœ ì¶œë˜ì—ˆìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ë¡œ ë¬´ì—‡ì„ í•´ì•¼ í• ê¹Œìš”? (íŒíŠ¸: ì¦ê±° í™•ë³´)",
        answer: "ì¦ê±° ìˆ˜ì§‘"
      },
      {
        text: "ì¦ê±° ìˆ˜ì§‘ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ëŠ”? (íŒíŠ¸: ë¡œê·¸ ë¶„ì„)",
        answer: "ë¡œê·¸ ë¶„ì„"
      },
      {
        text: "ë¡œê·¸ ë¶„ì„ì—ì„œ ê³µê²©ìë¥¼ íŠ¹ì •í–ˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ ë‹¨ê³„ëŠ”? (íŒíŠ¸: ë³´ê³ ì„œ ì‘ì„±)",
        answer: "ë³´ê³ ì„œ ì‘ì„±"
      },
      {
        text: "ëª¨ë“  ë‹¨ê³„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤!"
      }
    ];
    let currentStep = 0;

    function renderScenarioStep() {
      scenarioResult.textContent = "";
      scenarioInput.value = "";
      scenarioInput.disabled = false;
      btnScenarioNext.disabled = false;
      scenarioText.textContent = scenarioSteps[currentStep].text;
      if (!scenarioSteps[currentStep].answer) {
        // ë§ˆì§€ë§‰ ë©”ì‹œì§€
        scenarioInput.style.display = 'none';
        btnScenarioNext.style.display = 'none';
      } else {
        scenarioInput.style.display = 'block';
        btnScenarioNext.style.display = 'inline-block';
      }
    }

    btnScenarioNext.addEventListener('click', () => {
      const userAnswer = scenarioInput.value.trim().toLowerCase();
      const correctAnswer = scenarioSteps[currentStep].answer.toLowerCase();

      if (userAnswer === correctAnswer) {
        scenarioResult.textContent = "âœ… ì •ë‹µì…ë‹ˆë‹¤!";
        scenarioResult.style.color = "#16a34a";
        currentStep++;
        setTimeout(() => {
          renderScenarioStep();
        }, 1000);
      } else {
        scenarioResult.textContent = "âŒ ë‹µì´ í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.";
        scenarioResult.style.color = "#dc2626";
      }
    });

    renderScenarioStep();

    // ----------------------------
    // 4. íƒ€ì„ë¼ì¸ ë³µì› ê¸°ëŠ¥ (ë“œë˜ê·¸ ì •ë ¬)
    const timelineList = document.getElementById('timelineList');
    const btnSubmitTimeline = document.getElementById('btnSubmitTimeline');
    const timelineResult = document.getElementById('timelineResult');

    const timelineEvents = [
      { id: 1, text: "2025-07-19 10:12:30 - ì‚¬ìš©ì ë¡œê·¸ì¸" },
      { id: 2, text: "2025-07-19 10:13:02 - ë¡œê·¸ì¸ ì‹¤íŒ¨" },
      { id: 3, text: "2025-07-19 10:15:47 - ë¬´ë‹¨ ì ‘ê·¼ ì‹œë„" },
      { id: 4, text: "2025-07-19 10:16:05 - íŒŒì¼ ì—…ë¡œë“œ" },
      { id: 5, text: "2025-07-19 10:20:11 - ë¡œê·¸ì¸ ì‹¤íŒ¨" },
    ];

    // ì„ê¸° (ë³µì› ë¬¸ì œìš©)
    function shuffleArray(array) {
      let arr = array.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    let shuffledTimeline = shuffleArray(timelineEvents);

    function renderTimeline() {
      timelineList.innerHTML = "";
      shuffledTimeline.forEach(event => {
        const li = document.createElement('li');
        li.textContent = event.text;
        li.className = "draggable bg-white p-4 rounded-xl shadow-md cursor-grab border border-indigo-300 hover:bg-indigo-100 transition";
        li.draggable = true;
        li.dataset.id = event.id;
        timelineList.appendChild(li);
      });
    }

    // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë¡œì§
    let draggedEl = null;

    timelineList.addEventListener('dragstart', e => {
      draggedEl = e.target;
      e.target.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    });

    timelineList.addEventListener('dragend', e => {
      e.target.classList.remove('dragging');
      draggedEl = null;
    });

    timelineList.addEventListener('dragover', e => {
      e.preventDefault();
      const afterElement = getDragAfterElement(timelineList, e.clientY);
      if (afterElement == null) {
        timelineList.appendChild(draggedEl);
      } else {
        timelineList.insertBefore(draggedEl, afterElement);
      }
    });

    function getDragAfterElement(container, y) {
      const draggableElements = [...container.querySelectorAll('.draggable:not(.dragging)')];
      return draggableElements.reduce((closest, child) => {
        const box = child.getBoundingClientRect();
        const offset = y - box.top - box.height / 2;
        if (offset < 0 && offset > closest.offset) {
          return { offset: offset, element: child };
        } else {
          return closest;
        }
      }, { offset: Number.NEGATIVE_INFINITY }).element;
    }

    btnSubmitTimeline.addEventListener('click', () => {
      const order = [...timelineList.children].map(li => Number(li.dataset.id));
      // ì˜¬ë°”ë¥¸ ì •ë‹µ ìˆœì„œ: id ì˜¤ë¦„ì°¨ìˆœ
      const correctOrder = timelineEvents.map(e => e.id);

      let correct = order.every((val, idx) => val === correctOrder[idx]);

      if (correct) {
        timelineResult.textContent = "âœ… ì˜¬ë°”ë¥¸ ìˆœì„œì…ë‹ˆë‹¤!";
        timelineResult.style.color = "#16a34a";
      } else {
        timelineResult.textContent = "âŒ ìˆœì„œê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.";
        timelineResult.style.color = "#dc2626";
      }
    });

    renderTimeline();
  </script>
</body>
</html>
